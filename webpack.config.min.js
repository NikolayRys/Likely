const ExtractTextPlugin = require('extract-text-webpack-plugin');
const OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin');
const base = require('./webpack.config');

module.exports = Object.assign(base, {
    entry: {
        'likely.min': './source/likely.js',
        // [] is a workaround, see https://github.com/webpack/webpack/issues/300
        'likely-commonjs.min': ['./source/index.js'],
    },
    plugins: base.plugins.concat([
        new ExtractTextPlugin({
            filename: './release/likely.min.css',
            disable: false,
        }),
        new OptimizeCssAssetsPlugin({
            assetNameRegExp: /\.min\.css$/,
        }),
    ]),
});
